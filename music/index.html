<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta charset="utf-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <!-- å¼ºåˆ¶ HTTPSï¼Œè‹¥ä¸éœ€è¦å¯åˆ é™¤ï¼Œä½†å¯èƒ½å‡ºç°é—®é¢˜ -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="force-rendering" content="webkit" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#424242" />
    <title>MyIndex</title>
    <!-- jQuery -->
    <script src="./js/jquery3.5.1.js"></script>
    <!-- HarmonyOS Sans -->
    <!-- æœ¬ç«™ CDN å·²å¼€å¯é˜²ç›—é“¾ï¼Œéæœ¬ç«™åŸŸåä¸å¯è®¿é—®ï¼Œè¯·æ›´æ”¹é“¾æ¥ä¸ºä¸‹æ–¹å†…å®¹ï¼Œå¦åˆ™è‡ªå®šä¹‰å­—ä½“å°†å¤±æ•ˆ -->
    <!-- https://s1.hdslb.com/bfs/static/jinkela/long/font/regular.css -->
    <link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/regular.css" />
    <!-- <link rel="stylesheet" href="./css/regular.css" /> -->
    <!-- å¼•å…¥æ ·å¼ -->
    <!-- <link rel="stylesheet" type="text/css"
        href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-y/bootstrap/5.1.0/css/bootstrap.min.css"> -->
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min5.1.0.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" type="text/css" href="./css/mobile.css">
    <link rel="stylesheet" type="text/css" href="./css/loading.css">
    <link rel="stylesheet" type="text/css" href="./css/animation.css">
    <link rel="icon" href="./favicon.ico">
    <link rel="apple-touch-icon" href="./img/icon/apple-touch-icon.png">
    <link rel="stylesheet" href="./css/iziToast.min1.4.0.css">
    <script type="text/javascript"
        src="./js/iziToast.min1.4.0.js">
    </script>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.2/css/all.min.css">
    <link rel="stylesheet" href="./css/APlayer.min.1.10.1.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/aplayer/1.10.1/APlayer.min.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script> -->
    <script src="./js/APlayer.min.1.10.1.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <!-- <script src="./js/Meting.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <!-- IE Out -->
    <script>
        if ( /*@cc_on!@*/ false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href =
            "/upgrade-your-browser/index.html?referrer=" + encodeURIComponent(window.location.href);
    </script>
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <!-- 51.LA ç»Ÿè®¡ -->
    <script src="./js/51LA.js"></script>
</head>

<body>
    <!--åŠ è½½åŠ¨ç”»-->
    <div id="loading-box">
        <div class="loading-left-bg"></div>
        <div class="loading-right-bg"></div>
        <div class="spinner-box">
            <div class="loader">
                <div class="inner one"></div>
                <div class="inner two"></div>
                <div class="inner three"></div>
            </div>
            <div class="loading-word">
                <p class="loading-title" id="loading-title">Index</p>
                <span id="loading-text">Loading......</span>
            </div>
        </div>
    </div>
    <section id="section" class="section">
        <!-- èƒŒæ™¯å›¾ç‰‡ -->
        <style type="text/css">
            body{
              background: url("img/beijing.jpg") no-repeat center center fixed;
                          /*å…¼å®¹æµè§ˆå™¨ç‰ˆæœ¬*/
                          -webkit-background-size: cover;
                          -o-background-size: cover;                
                          background-size: cover;
            } /*èƒŒæ™¯å›¾*/
       
            .test {
              margin-top: 100px;
            }
          </style>
        <!-- é¼ æ ‡æŒ‡é’ˆ -->
        <div id="g-pointer-1"></div>
        <div id="g-pointer-2"></div>
        <!-- ä¸»ä½“å†…å®¹ -->
        <main id="main" class="main">
            <!-- æœç´¢æ¡† -->
            <div class="close-btn">
                <span class="fas fa-times"></span>
            </div>
            <div class="search-btn">
                <span class="fas fa-search"></span>
            </div>
            <div class="search-data">
                <input type="text" id="inp" required/>
                <div class="line"></div>
                <label>Type to search...</label>
                <span class="fas fa-search" id="btn"></span>
            </div>
 
            <script>
                var oInp = document.getElementById('inp');
                var oBtn = document.getElementById('btn');
            
                oBtn.onclick = function () {
                    Search();
                }
            
                document.onkeydown = function () {
                    if (event.keyCode == 13) {
                        Search();
                    }
                }
            
                function Search() {
                    var url = 'https://cn.bing.com/search?q=' + oInp.value;
                    window.open(url,'_self');
                }
            </script>

            <script>//
                $(".search-btn").click(function(){
                    $(this).css("display","none");
                    $(".search-data").fadeIn(500);
                    $(".close-btn").fadeIn(500);
                    $(".search-data .line").addClass("active");
                    setTimeout(function(){
                        $("input").focus();
                        $(".search-data label").fadeIn(500);
                        $(".search-data span").fadeIn(500);
                    }, 800);
                });
                $(".close-btn").click(function(){
                    $(".search-btn").fadeIn(800);
                    $(".search-data").fadeOut(500);
                    $(".close-btn").fadeOut(500);
                    $(".search-data .line").removeClass("active");
                    $("input").val("");
                    $(".search-data label").fadeOut(500);
                    $(".search-data span").fadeOut(500);
                });
            </script>
            <div class="container" id="container">
                <div class="row" id="row">
                    <div class="col left">
                        <!--åŸºæœ¬ä¿¡æ¯-->
                        <div class="main-left">
                            <!--Logo-->
                        
                            <!--ä»‹ç»ä¿¡æ¯-->
           
                    <!--ç¬¬äºŒå± Logo-->
                    <div class="logo cards" style="display: none" id="changemore">
                        <a class="logo-text" id="logo-text-small">imsyy.top</a>
                    </div>
                    <div class="col right">
                        <div class="main-right">
                            <!--åŠŸèƒ½åŒº-->
                            <div class="row rightone" id="rightone">
                                <div class="col hitokotos">
                                    <!--ä¸€è¨€-->
                                    <div class="hitokoto cards" id="hitokoto">
                                        <!--åˆ‡æ¢éŸ³ä¹-->
                                        <div class="open-music fixed-top" id="open-music">
                                            <i class="fa-solid fa-compact-disc"></i>
                                            <span>&nbsp;æ‰“å¼€éŸ³ä¹æ’­æ”¾å™¨</span>
                                        </div>
                                        <!--åˆ‡æ¢éŸ³ä¹ç»“æŸ-->
                                    <div class="time cards" id="upWeather">
                                        <div class="timeshow" id="time">
                                            2000&nbsp;å¹´&nbsp;0&nbsp;æœˆ&nbsp;00&nbsp;æ—¥&nbsp;<span
                                                class="weekday">æ˜ŸæœŸä¸€</span><br><span class="time-text">00:00:00</span>
                                        </div>
                                        <div class="weather">
                                            <span id="city_text"> </span>&nbsp;
                                            <span id="wea_text"> </span>&nbsp;
                                            <span id="tem_text"> </span>
                                            <span id="win_text"> </span>
                                            <span id="win_speed"> </span>
                                        </div>
                                    </div>
                                    </div>
                                    <!--éŸ³ä¹-->
                                    <div class="music" id="music">
                                        <div class="music-all">
                                            <div class="music-button">
                                                <!-- <div id="music-open">éŸ³ä¹åˆ—è¡¨</div> -->
                                                <div id="music-close">å›åˆ°å¤©æ°”</div>
												
						
											
                                            </div>
                                            <div class="music-control">
                                                <i class="fa-solid fa-backward-step" id="last"></i>
                                                <div id="play">
                                                    <i class="fa-solid fa-play"></i>
                                                </div>
                                                <i class="fa-solid fa-forward-step" id="next"></i>
                                            </div>
                                            <div class="music-menu">
                                                <div class="music-text">
                                                    <span id="music-name">æœªæ’­æ”¾éŸ³ä¹</span>
                                                </div>
                                                <div class="music-volume" style="display: none;">
                                                    <div id="volume-ico">
                                                        <i class="fa-solid fa-volume-low"></i>
                                                    </div>
                                                    <input type="range" min="0" max="1" step="0.01" id="volume">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
								
                                <div class="col times">
                                    <!--æ—¶é—´-->
                                    <div class="time cards" id="upWeather">
                                   <div id="lrc"></div>
                                    </div>
                                </div>
								<div class="col times">
								    <!--æ—¶é—´-->
							<form id="playlistForm">
								<input type="text" id="playlistId" name="playlistId" required placeholder="è¾“å…¥æ­Œå• ID" autocomplete="off" style="color: aqua;"><br>
								<select id="audioSource" name="audioSource" required>
									<option value="" disabled selected style="color: aqua;">é€‰æ‹©éŸ³æº</option>
									<option value="netease" style="color: aqua;">ç½‘æ˜“</option>
									<option value="kugou" style="color: aqua;">é…·ç‹—</option>
								</select><br>
								<br>
								<button id="submitButton">æäº¤</button>
								</div>
                            </div>
                            <!--åˆ†éš”çº¿-->
                           
                        <!--Aplayer-->
                        <div class="box-right"style="width: 100%; height: 400px;margin-left: 250px;">
                            <div class="aplayer" style="width: 100%; height: 400px;">
                                <span>éŸ³ä¹æ’­æ”¾å™¨åŠ è½½å¤±è´¥</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!-- ç‰ˆæƒä¿¡æ¯ -->
        <footer id="footer" class="fixed-bottom footer">
            <div class="power">Copyright&nbsp;Â©&nbsp;<span id="power-year">2022</span>
                <script>
                    document.write(' - ' + (new Date()).getFullYear())
                </script>
                <!-- &nbsp;<a href="http://www.hsbupt.love/" id="power-text">å—æ·®èŠ±é…±|Hs</a>&nbsp;&amp;&nbsp; -->
                <!-- ä»¥ä¸‹ä¿¡æ¯è¯·ä¸è¦ä¿®æ”¹å“¦ -->
                Made&nbsp;âš™Modified from&nbsp;<a href="/" target="_blank">imsyy</a>
				ğŸ”’<a href="https://beian.miit.gov.cn/">æš‚æœªå¤‡æ¡ˆ</a>
            </div>
            <!-- æ­Œè¯æ˜¾ç¤º -->
            <div id="lrc"/>
        </footer>
    </section>
    <!-- sw.js -->
    <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", function () {
                navigator.serviceWorker.register("sw.js");
            });
        }
    </script>
    <!-- noscript -->
    <noscript>
        <div class="noscript fixed-top">è¯·å¼€å¯ JavaScript</div>
    </noscript>
    <script type="text/javascript" src="./js/main.js"></script>

    <script type="text/javascript"
        src="./js//bootstrap.min.5.1.0.js">
    </script>
	<script>
 $(document).ready(function() {
            $("#submitButton").click(function(event) {
                event.preventDefault();

                var id = $("#playlistId").val();
                var server = $("#audioSource").val();
				console.log(id)
				console.log(server)
/*
éŸ³ä¹ä¿¡æ¯

æ„Ÿè°¢ @æ­¦æ©èµ æä¾›çš„ MetingAPI
https://api.wuenci.com/meting/api/

ä½œè€…: imsyy
ä¸»é¡µï¼šhttps://www.imsyy.top/
GitHubï¼šhttps://github.com/imsyy/home
ç‰ˆæƒæ‰€æœ‰ï¼Œè¯·å‹¿åˆ é™¤
*/

// var server = "netease"; //netease: ç½‘æ˜“äº‘éŸ³ä¹; tencent: QQéŸ³ä¹; kugou: é…·ç‹—éŸ³ä¹; xiami: è™¾ç±³; kuwo: é…·æˆ‘
var type = "playlist"; //song: å•æ›²; playlist: æ­Œå•; album: å”±ç‰‡
// var id = "8816912997"; //å°é¢ ID / å•æ›² ID / æ­Œå• ID

$.ajax({
    url: "https://api.injahow.cn/meting/?server=" + server + "&type=" + type + "&id=" + id,
    type: "GET",
    dataType: "JSON",
    success: function (data) {
        const ap = new APlayer({
            container: document.querySelector('.aplayer'),
            order: 'random',
            preload: 'auto',
            listMaxHeight: '336px',
            volume: '0.5',
            mutex: true,
            lrcType: 3,
            audio: data,
        });

        /* åº•æ æ­Œè¯ */
        setInterval(function () {
            $("#lrc").html("<span class='lrc-show'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18'><path fill='none' d='M0 0h24v24H0z'/><path d='M12 13.535V3h8v3h-6v11a4 4 0 1 1-2-3.465z' fill='rgba(255,255,255,1)'/></svg>&nbsp;" + $(".aplayer-lrc-current").text() + "&nbsp;<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18'><path fill='none' d='M0 0h24v24H0z'/><path d='M12 13.535V3h8v3h-6v11a4 4 0 1 1-2-3.465z' fill='rgba(255,255,255,1)'/></svg></span>");
        }, 500);

        /* éŸ³ä¹é€šçŸ¥åŠæ§åˆ¶ */
        ap.on('play', function () {
            music = $(".aplayer-title").text() + $(".aplayer-author").text();
            iziToast.info({
                timeout: 4000,
                icon: "fa-solid fa-circle-play",
                displayMode: 'replace',
                message: music
            });
            $("#play").html("<i class='fa-solid fa-pause'>");
            $("#music-name").html($(".aplayer-title").text() + $(".aplayer-author").text());
            if ($(document).width() >= 990) {
                $('.power').css("cssText", "display:none");
                $('#lrc').css("cssText", "display:block !important");
            };
            // Notification.requestPermission().then(res => {
            //     console.log(res)
            // });
            // new Notification('éŸ³ä¹é€šçŸ¥', {
            //     body: 'æ­£åœ¨æ’­æ”¾ï¼š' + music,
            //     tag: 1	
            // });
        });

        ap.on('pause', function () {
            $("#play").html("<i class='fa-solid fa-play'>");
            if ($(document).width() >= 990) {
                $('#lrc').css("cssText", "display:none !important");
                $('.power').css("cssText", "display:block");
            }
        });

        $("#music").hover(function () {
            $('.music-text').css("display", "none");
            $('.music-volume').css("display", "flex");
        }, function () {
            $('.music-text').css("display", "block");
            $('.music-volume').css("display", "none");
        })

        /* ä¸€è¨€ä¸éŸ³ä¹åˆ‡æ¢ */
        $('#open-music').on('click', function () {
            $('#hitokoto').css("display", "none");
            $('#music').css("display", "flex");
        });

        $("#hitokoto").hover(function () {
            $('#open-music').css("display", "flex");
        }, function () {
            $('#open-music').css("display", "none");
        })

        $('#music-close').on('click', function () {
            $('#music').css("display", "none");
            $('#hitokoto').css("display", "flex");
        });

        /* ä¸Šä¸‹æ›² */
        $('#play').on('click', function () {
            ap.toggle();
            $("#music-name").html($(".aplayer-title").text() + $(".aplayer-author").text());
        });

        $('#last').on('click', function () {
            ap.skipBack();
            ap.play();
            $("#music-name").html($(".aplayer-title").text() + $(".aplayer-author").text());
        });

        $('#next').on('click', function () {
            ap.skipForward();
            ap.play();
            $("#music-name").html($(".aplayer-title").text() + $(".aplayer-author").text());
        });

        window.onkeydown = function (e) {
            if (e.keyCode == 32) {
                ap.toggle();
            }
        }

        /* æ‰“å¼€éŸ³ä¹åˆ—è¡¨ */
        $('#music-open').on('click', function () {
            if ($(document).width() >= 990) {
                $('#box').css("display", "block");
                $('#row').css("display", "none");
                $('#more').css("cssText", "display:none !important");
            }
        });

        //éŸ³é‡è°ƒèŠ‚
        $("#volume").on('input propertychange touchend', function () {
            let x = $("#volume").val();
            ap.volume(x, true);
            if (x == 0) {
                $("#volume-ico").html("<i class='fa-solid fa-volume-xmark'></i>");
            } else if (x > 0 && x <= 0.3) {
                $("#volume-ico").html("<i class='fa-solid fa-volume-off'></i>");
            } else if (x > 0.3 && x <= 0.6) {
                $("#volume-ico").html("<i class='fa-solid fa-volume-low'></i>");
            } else {
                $("#volume-ico").html("<i class='fa-solid fa-volume-high'></i>");
            }
        });
    },
    error: function () {
        setTimeout(function () {
            iziToast.info({
                timeout: 8000,
                icon: "fa-solid fa-circle-exclamation",
                displayMode: 'replace',
                message: 'éŸ³ä¹æ’­æ”¾å™¨åŠ è½½å¤±è´¥'
            });
        }, 3800);
    }
})

            });
        });
	</script>
</body>

</html>
